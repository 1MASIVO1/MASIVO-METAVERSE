<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MASIVO METAVERSE</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body,html{
  margin:0;
  padding:0;
  font-family:Arial, sans-serif;
  color:white;
  overflow-x:hidden;
  background:#2a2a2a;
}

/* VIDEO */
#bg-video{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
}

/* OVERLAY */
.overlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
  z-index:-1;
}

/* HEADER */
header{
  display:flex;
  justify-content:center;
  padding:20px;
  background:rgba(0,0,0,0.7);
  backdrop-filter:blur(8px);
  font-size:24px;
  font-weight:bold;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:30px;
  padding:40px;
}

/* CARD */
.card{
  background:rgba(0,0,0,0.75);
  border-radius:15px;
  padding:20px;
  backdrop-filter:blur(8px);
  transition:0.3s;
}

.card:hover{
  transform:translateY(-8px);
}

.card img{
  width:100%;
  border-radius:12px;
}

/* BUTTONS */
.actions{
  display:flex;
  justify-content:space-between;
  margin-top:15px;
}

button{
  background:#00f0ff;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
}

button:hover{
  opacity:0.8;
}

/* STATS */
.stats{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
  font-size:14px;
}
</style>
</head>
<body>

<video autoplay muted loop playsinline id="bg-video">
  <source src="images/background.mp4" type="video/mp4">
</video>

<div class="overlay"></div>

<header>
MASIVO METAVERSE
</header>

<main class="grid">

  <div class="card">
    <img id="nftImage" src="images/masivo1.png">

    <div class="actions">
      <button onclick="likeNFT(1)">üëç Like</button>
      <button onclick="downloadNFT(1)">‚¨áÔ∏è Descargar</button>
      <button onclick="shareNFT(1)">üîÅ Compartir</button>
    </div>

    <div class="stats">
      <span>üëÅÔ∏è <span id="views-1">0</span></span>
      <span>‚ù§Ô∏è <span id="likes-1">0</span></span>
      <span>‚¨áÔ∏è <span id="downloads-1">0</span></span>
      <span>üîÅ <span id="shares-1">0</span></span>
    </div>
  </div>

</main>

<script>

const supabase = window.supabase.createClient(
  "https://rnkuxwsuztewgbdmjyxt.supabase.co",
  "sb_publishable_TV8SzvPyTPZauyBNkg_RxA_oW5N56NT"
);

async function loadStats(id){
  const { data } = await supabase
    .from("nfts")
    .select("*")
    .eq("id", id)
    .single();

  if(data){
    document.getElementById("views-"+id).textContent = data.views;
    document.getElementById("likes-"+id).textContent = data.likes;
    document.getElementById("downloads-"+id).textContent = data.downloads;
    document.getElementById("shares-"+id).textContent = data.shares;
  }
}

async function likeNFT(id){
  await supabase.rpc("increment_likes",{ nft_id:id });
  loadStats(id);
}

async function downloadNFT(id){
  await supabase.rpc("increment_downloads",{ nft_id:id });

  const link=document.createElement("a");
  link.href=document.getElementById("nftImage").src;
  link.download="MASIVO-NFT.png";
  link.click();

  loadStats(id);
}

async function shareNFT(id){
  await supabase.rpc("increment_shares",{ nft_id:id });

  navigator.clipboard.writeText(window.location.href);
  alert("Link copiado");

  loadStats(id);
}

window.onload = async ()=>{
  await supabase.rpc("increment_views",{ nft_id:1 });
  loadStats(1);
};

</script>

</body>
</html>
